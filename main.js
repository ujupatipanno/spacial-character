var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var S=(a,o)=>{for(var s in o)r(a,s,{get:o[s],enumerable:!0})},f=(a,o,s,e)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of d(o))!b.call(a,t)&&t!==s&&r(a,t,{get:()=>o[t],enumerable:!(e=m(o,t))||e.enumerable});return a};var w=a=>f(r({},"__esModule",{value:!0}),a);var C={};S(C,{default:()=>h});module.exports=w(C);var g=require("obsidian"),E={triggerChar:"/",fuzzySearch:!0,highlight:!0,symbols:[]},c=class extends g.EditorSuggest{constructor(s){super(s.app);this.plugin=s}onTrigger(s,e,t){let i=e.getLine(s.line).slice(0,s.ch);if(!i.contains(this.plugin.settings.triggerChar))return null;let n=i.lastIndexOf(this.plugin.settings.triggerChar),l=i.slice(n+1,i.length);return{start:{...s,ch:n},end:s,query:l}}fuzzyMatch(s,e){let t=0,i=0,n=[];for(s=s.toLowerCase(),e=e.toLowerCase();t<s.length&&i<e.length;)s[t]===e[i]&&(this.plugin.settings.highlight&&n.push(t),i++),t++;return i===e.length?this.plugin.settings.highlight?n:[]:!1}getSuggestions(s){let e=s.query;if(e.startsWith(" "))return[];let t=[];for(let i=0;i<this.plugin.settings.symbols.length;i++){let n=this.plugin.settings.symbols[i];if(this.plugin.settings.fuzzySearch){let l=this.fuzzyMatch(n.id,e);l&&t.push({symbolItem:n,positions:l})}else n.id.toLowerCase().contains(e.toLowerCase())&&t.push({symbolItem:n,positions:[]})}return t}buildHighlighted(s,e){let t="";for(let i=0;i<s.length;i++)e.includes(i)?t+=`<b class="symbol-fuzzy-match">${s[i]}</b>`:t+=s[i];return t}async renderSuggestion(s,e){let t=s.symbolItem;if(this.plugin.settings.highlight&&s.positions.length>0){let i=e.createEl("span");i.innerHTML=this.buildHighlighted(t.id,s.positions)}else e.createEl("span",{text:t.id});e.createEl("span",{text:` ${t.symbol}`})}selectSuggestion(s,e){this.context&&this.context.editor.replaceRange(s.symbolItem.symbol,this.context.start,this.context.end),this.close()}},h=class extends g.Plugin{async onload(){await this.loadSettings(),this.registerEditorSuggest(new c(this)),this.addSettingTab(new u(this.app,this))}onunload(){}async loadSettings(){this.settings=Object.assign({},E,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},u=class extends g.PluginSettingTab{constructor(s,e){super(s,e);this.plugin=e}display(){let{containerEl:s}=this;s.empty(),s.createEl("h2",{text:"\uAE30\uD638 \uC785\uB825 \uD50C\uB7EC\uADF8\uC778 \uC124\uC815"}),s.createEl("h3",{text:"\uAE30\uBCF8 \uC124\uC815"}),new g.Setting(s).setName("\uD2B8\uB9AC\uAC70 \uBB38\uC790").setDesc("\uAE30\uD638 \uC81C\uC548\uC744 \uC2DC\uC791\uD560 \uBB38\uC790\uB97C \uC785\uB825\uD558\uC138\uC694").addText(e=>e.setPlaceholder("/").setValue(this.plugin.settings.triggerChar).onChange(async t=>{t&&t.length>1?(new g.Notice("\uD55C \uAE00\uC790\uB9CC \uC0AC\uC6A9\uD574\uC8FC\uC138\uC694"),e.setValue(t[0])):(this.plugin.settings.triggerChar=t,await this.plugin.saveSettings())})),new g.Setting(s).setName("\uD37C\uC9C0 \uAC80\uC0C9 \uD65C\uC131\uD654").setDesc("\uC815\uD655\uD55C ID\uB97C \uC785\uB825\uD558\uC9C0 \uC54A\uC544\uB3C4 \uAE30\uD638\uB97C \uB9E4\uCE6D\uD569\uB2C8\uB2E4 (\uC608: 'arr' \u2192 'arrow')").addToggle(e=>{e.setValue(this.plugin.settings.fuzzySearch).onChange(async t=>{this.plugin.settings.fuzzySearch=t,await this.plugin.saveSettings()})}),new g.Setting(s).setName("\uB9E4\uCE6D \uD558\uC774\uB77C\uC774\uD2B8").setDesc("\uAC80\uC0C9 \uACB0\uACFC\uC5D0\uC11C \uB9E4\uCE6D\uB41C \uBB38\uC790\uB97C \uAC15\uC870 \uD45C\uC2DC\uD569\uB2C8\uB2E4").addToggle(e=>{e.setValue(this.plugin.settings.highlight).onChange(async t=>{this.plugin.settings.highlight=t,await this.plugin.saveSettings()})}),s.createEl("h3",{text:"\uC0C8 \uAE30\uD638 \uCD94\uAC00"}),new g.Setting(s).setName("\uAE30\uD638 \uCD94\uAC00").setDesc("\uC790\uC8FC \uC0AC\uC6A9\uD558\uB294 \uAE30\uD638\uB97C \uCD94\uAC00\uD558\uC138\uC694").addButton(e=>{e.setButtonText("+ \uC0C8 \uAE30\uD638").onClick(async()=>{this.plugin.settings.symbols.push({id:"",symbol:""}),await this.plugin.saveSettings(),this.display()})}),s.createEl("h3",{text:"\uAE30\uD638 \uBAA9\uB85D"}),this.plugin.settings.symbols.length===0&&s.createDiv({cls:"setting-item"}).createDiv({cls:"setting-item-description"}).setText("\uCD94\uAC00\uB41C \uAE30\uD638\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. '+ \uC0C8 \uAE30\uD638' \uBC84\uD2BC\uC744 \uB20C\uB7EC \uC2DC\uC791\uD558\uC138\uC694."),this.plugin.settings.symbols.forEach((e,t)=>{let i=new g.Setting(s).setName("ID").setDesc(`\uAE30\uD638 #${t+1} - \uAC80\uC0C9\uC6A9 \uC2DD\uBCC4\uC790`);i.addText(n=>{n.setPlaceholder("arrow").setValue(e.id).onChange(async l=>{this.plugin.settings.symbols.some((p,y)=>y!==t&&p.id===l)&&l!==""?new g.Notice("\uC774\uBBF8 \uC0AC\uC6A9 \uC911\uC778 ID\uC785\uB2C8\uB2E4"):(e.id=l,await this.plugin.saveSettings())})}),t>0&&i.addExtraButton(n=>{n.setIcon("up-chevron-glyph").setTooltip("\uC704\uB85C \uC774\uB3D9").onClick(async()=>{let l=this.plugin.settings.symbols[t];this.plugin.settings.symbols[t]=this.plugin.settings.symbols[t-1],this.plugin.settings.symbols[t-1]=l,await this.plugin.saveSettings(),this.display()})}),t<this.plugin.settings.symbols.length-1&&i.addExtraButton(n=>{n.setIcon("down-chevron-glyph").setTooltip("\uC544\uB798\uB85C \uC774\uB3D9").onClick(async()=>{let l=this.plugin.settings.symbols[t];this.plugin.settings.symbols[t]=this.plugin.settings.symbols[t+1],this.plugin.settings.symbols[t+1]=l,await this.plugin.saveSettings(),this.display()})}),i.addExtraButton(n=>{n.setIcon("trash").setTooltip("\uC0AD\uC81C").onClick(async()=>{this.plugin.settings.symbols.splice(t,1),await this.plugin.saveSettings(),this.display(),new g.Notice("\uAE30\uD638\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4")})}),new g.Setting(s).setName("\uAE30\uD638").setDesc("\uC2E4\uC81C \uAE30\uD638 \uBB38\uC790").addText(n=>{n.setPlaceholder("\u2192").setValue(e.symbol).onChange(async l=>{e.symbol=l,await this.plugin.saveSettings()})}),t<this.plugin.settings.symbols.length-1&&s.createEl("hr",{cls:"symbol-divider"})})}};
